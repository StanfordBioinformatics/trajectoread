{
    "name": "bcl2fastq",
    "title": "Convert bcl to fastq files",
    "summary": "Convert Illumina Bcl to FastQ files",
    "description": "Converts Illumina data from Bcl to FastqQ, demultiplexing barcoded samples if appropriate",
    "dxapi": "1.0.0",
    "version": "0.1.0",
    "inputSpec": [
        {
            "name": "record_link",
            "label": "SCGPM record DXLink",
            "help": "Sequencing lane record in format: project-XXX:record-YYY",
            "class": "string",
            "optional": false
        },
        {
            "name": "output_folder",
            "label": "Output location",
            "help": "Project and folder location for output files: [project-XXX:]/folder",
            "class": "string",
            "optional": false,
            "default": "/stage0_bcl2fastq"
        },
        {
            "name": "lane_data_tar",
            "label": "Lane tar file",
            "class": "file",
            "patterns": ["*.tar", "*.tar.gz"],
            "optional": false
        },
        {
            "name": "metadata_tar",
            "label": "Metadata tar file",
            "class": "file",
            "patterns": ["*metadata.tar", "*metadata.tar.gz"],
            "optional": false
        },
        {
            "name": "barcodes_file",
            "label": "Barcodes file",
            "help": "Text file with one barcode per line: 'ATCGT-GTACT A1'",
            "class": "file",
            "patterns": ["*barcodes.txt"],
            "optional": false
        },
        {
            "name": "test_mode",
            "help": "Demultiplexes a single tile to speed things up in test mode.",
            "class": "boolean",
            "optional": true,
            "default": false
        },
        {
            "name": "barcode_mismatches",
            "label": "Barcode Mismatches",
            "help": "Number of barcode mismatches allowed",
            "class": "int",
            "optional": true,
            "default": 1
        },
        {
            "name": "ignore_missing_stats",
            "label": "Ignore missing stats files?",
            "class": "boolean",
            "optional": true,
            "default": true
        },
        {
            "name": "ignore_missing_bcl",
            "label": "Ignore missing bcl files?",
            "class": "boolean",
            "optional": true,
            "default": true
        },
        {
            "name": "ignore_missing_positions",
            "label": "Ignore missing positions",
            "help": "(bcl2fastq2) Missing or corrupt positions files are ignored",
            "class": "boolean",
            "optional": true,
            "default": true
        },
        {
            "name": "ignore_missing_filter",
            "label": "Ignore missing filter files",
            "help": "Missing or corrupt filter files are ignored. Assumes Passing Filter for all clusters in tiles where filter files are missing.",
            "class": "boolean",
            "optional": true,
            "default": true
        },
        {
            "name": "with_failed_reads",
            "label": "Include failed reads in output?",
            "class": "boolean",
            "optional": true,
            "default": false
        },
        {
            "name": "tiles",
            "label": "Tiles to restrict the analysis to.",
            "help": "See --tiles argument of the Illumina tool bcl2fastq. Takes a comma-separated list of regular expressions to select only a subset of the tiles available in the flow-cell.",
            "class": "string",
            "optional": true
        }
    ],
    "outputSpec": [
        {
            "name": "fastqs",
            "label": "Fastq files",
            "class": "array:file",
            "optional": false
        },
        {
            "name": "lane_html",
            "lable": "Lane html file",
            "class": "file",
            "optional": true
        },
        {
            "name": "tools_used",
            "label": "Tools used",
            "class": "file",
            "optional": false
        }
    ],
    "runSpec": {
        "interpreter": "python2.7",
        "file": "src/bcl2fastq.py",
        "bundledDepends": [],
        "execDepends": [
            {"name": "libxml-simple-perl"},
            {"name": "xsltproc"},
            {"name": "imagemagick"},
            {"name": "gnuplot-nox"},
            {"name": "ghostscript"},
            {"name": "zlib1g-dev"},
            {"name": "libbz2-dev"},
            {"name": "libxml2"},
            {"name": "libxml2-dev"},
            {"name": "libicu-dev"},
            {"name": "libncurses5"},
            {"name": "libncurses5-dev"}
        ],
        "systemRequirements": {
            "*": {
                "instanceType": "mem1_ssd1_x16"
            }
        },
        "distribution": "Ubuntu",
        "release": "12.04"
    },
    "access": {
        "allProjects": "ADMINISTER",
        "network": ["*"]
    }
}
